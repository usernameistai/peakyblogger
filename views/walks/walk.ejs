<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Eating & Walking</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/main.css" />
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Homemade+Apple" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Work+Sans" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"> 
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-info" id="nav">
		<a class="navbar-brand" href="/"><i class="fas fa-tree fa-2x"></i><i class="fas fa-utensils fa-2x"></i> Peaky Blogger |</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item">
					<a class="nav-link" href="/home">Home <span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="http://www.peakdistrict.gov.uk/">Peak District National Park</a>
				</li>
			</ul>
			<ul class="navbar-nav ml-auto">
				<li>
					<form action="/walks" method="GET" class="form-inline my-2 my-sm-0">
						<div class="form-group">
							<input type="text" name="search" class="form-control mr-sm-2" style="width: 15rem;" placeholder="Search" aria-label="Search">
							<input type="submit" class="btn" value="Search">
						</div>
					</form>
				</li>
				<li class="nav-item dropdown">
					<% if(currentUser) { %>
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<%= currentUser.username %>'s stuff
						</a>
						<% } else { %>
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							JDB's stuff
						</a>
						<% } %>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<% if(!currentUser) { %>
							<a class="dropdown-item" href="/login">Login</a>
							<a class="dropdown-item" href="/register">Sign Up</a>
						<% } else { %>
							<p>&emsp; Signed in as <%= currentUser.username %></p>
							<a class="dropdown-item" href="/logout">Logout</a>
						<% } %>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="https://www.rohan.co.uk/">Rohan Outdoor Wear</a>
					</div>
				</li>
				<li class="nav-item active">
					<a class="nav-link" href="/walks">Walks & Blogs</a>
				</li>
			</ul>
		</div>
	</nav>

	<main>
		<div class="container">    
			<% if(error && error.length > 0){ %>
				<div class="alert alert-danger" role="alert">
					<%= error %>>
				</div>
			<% } %>
			<% if(success && success.length > 0){ %>
				<div class="alert alert-success" role="alert">
					<%= success %>>
				</div>
			<% } %>
		</div>
		<div class="container-lg">
       
		<header>
			<div class="container m-auto p-auto" > <!-- style="margin: auto; padding: auto;" -->
				<div class="jumbotron walk_jumb shadow mt-3">
					<div class="container">
						<h1 class="pageone" style="padding-bottom: 0; margin: auto; color: #41533b;"> 
							<i class="fas fa-tree fa-2x"></i><i class="fas fa-utensils fa-2x"></i>
							<div style="text-shadow: 2px 4px 3px rgba(68, 83 , 59, 0.3);"></div>Where to Eat in the Peak District</div>
						</h1>
						<h6 style="text-align: center; color: #41533b; padding-bottom: 1.75rem;">..giving you some idea of where the best places to eat are in the Peak District. I’ll also give you an idea where some of the best walks are.. </h6>
						<% if(currentUser && currentUser.isAdmin){ %>
								<p style="text-align: center; margin: 2rem 0 0 0;">
										<a class="btn btn-lg" href="/walks/new">Add a Walk and Blog</a>
							</p>
						<% } %>
					</div>
				</div>
			</div>
		</header>
		<br>
		<div class="container">
			<div class="col">
				<% walks.reverse().forEach(function(walk){ %> <!-- added .reverse(). -->
					<div class="card" style="margin: 0.5rem 0; background-color: #e6ebe6;">
						<div class="row gutters">
							<div class="col-md-6">
								<div class="card-block px-2">
									<h5 class="card-title w-100 text-center" style="padding-top: 0.5rem;"><strong><%= walk.name %></strong></h5>
									<p class="card-text w-100" style="padding-bottom: 1rem; text-align: left;"><%= walk.description.substring(0, 108) %>..</p>
									<p style="text-align: right; padding-bottom: 2rem;"><%= moment(walk.createdAt).fromNow() %></p>
								</div>
								<div class="card-footer text-muted text-center w-100">
									<a href="/walks/<%= walk._id %>" class="btn woodlandgreen">More Info</a>
								</div>
							</div>
							<div class="col-md-6">
								<img src="<%= walk.image %>" class="img-fluid rounded mr-auto" style="position: relative; height: auto; margin: 0 auto; padding: 1rem 1rem 0 0;" alt="Responsive image">
							</div>
						</div>
					</div>
				<% }); %>
			</div>
		</div>


		<div class="row text-md-center" >
				<% if (pages && pages > 0) { %>
				<ul class="pagination text-center">
						<% if (current == 1) { %>
						<li class="disabled"><a>First</a></li>
						<% } else { %>
						<li><a href="/walks">First</a></li>
						<% } %>
		
						<% if (current == 1) { %>
						<li class="disabled"><a>«</a></li>
						<% } else { %>
						<li><a href="/walks?page=<%= Number(current) - 1 %>">«</a></li>
						<% } %>
		
						<% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
						<% if (i !== 1) { %>
						<li class="disabled"><a>...</a></li>
						<% } %>
						<% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
						<% if (i == current) { %>
						<li class="active"><a><%= i %></a></li>
						<% } else { %>
						<li><a href="/walks?page=<%= i %>"><%= i %></a></li>
						<% } %>
						<% if (i == Number(current) + 4 && i < pages) { %>
						<li class="disabled"><a>...</a></li>
						<% } %>
						<% } %>
		
						<% if (current == pages) { %>
						<li class="disabled"><a>»</a></li>
						<% } else { %>
						<li><a href="/walks?page=<%= Number(current) + 1 %>">»</a></li>
						<% } %>
		
						<% if (current == pages) { %>
						<li class="disabled"><a>Last</a></li>
						<% } else { %>
						<li><a href="/walks?page=<%= pages %>">Last</a></li>
						<% } %>
				</ul>
				<% } %>
		</div>

		<% include ../partials/footer.ejs %>